
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Breast Cancer Risk Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    label { display: block; margin-top: 10px; }
    input[type="number"], input[type="text"], select { margin-top: 5px; }
    .output { margin-top: 20px; font-weight: bold; }
    .low { color: green; }
    .moderate { color: orange; }
    .high { color: red; }
    #modifiers { display: none; margin-top: 15px; }
    button { margin-top: 15px; }
  </style>
</head>
<body>
  <h1>Breast Cancer Risk Calculator</h1>
  <form id="riskForm">
    <label>Age: <input type="number" id="age" value="51"></label>
    <label>Height (inches): <input type="number" id="height" value="64"></label>
    <label>Weight (lbs): <input type="number" id="weight" value="118"></label>
    <label>A1C (Hemoglobin A1C): <input type="number" id="a1c" step="0.1" value="5.2"></label>
    <label>Systolic Blood Pressure (mmHg): <input type="number" id="bp" value="115"></label>
    <label>Vitamin D (ng/mL): <input type="number" id="vitd" step="0.1" value="80"></label>
    <label>Age at Menarche: <input type="number" id="menarche" value="13"></label>
    <label>Alcohol Drinks per Week: <input type="number" id="alcohol" value="0"></label>
    <label>Do you engage in ≥150 min/wk moderate or ≥75 min/wk vigorous activity?
      <select id="exercise"><option value="yes">Yes</option><option value="no">No</option></select>
    </label>
    <label><input type="checkbox" id="dense"> Dense Breasts</label>
    <label><input type="checkbox" id="family"> First-Degree Relative with Breast Cancer</label>
    <label><input type="checkbox" id="nulliparous"> Nulliparous (never given birth)</label>
    <label><input type="checkbox" id="hrt"> HRT (Hormone Replacement Therapy)</label>
    <label><input type="checkbox" id="smoking"> Current or Past Smoker</label>
    <label><input type="checkbox" id="brca"> Known BRCA1 or BRCA2 Mutation</label>

    <h3>PHQ-9 Depression Screening</h3>
    <p>0 = Not at all, 1 = Several days, 2 = More than half the days, 3 = Nearly every day</p>
    <label>Little interest or pleasure in doing things: <input type="number" min="0" max="3" id="phq1" value="0"></label>
    <label>Feeling down, depressed, or hopeless: <input type="number" min="0" max="3" id="phq2" value="0"></label>
    <label>Trouble falling/staying asleep or sleeping too much: <input type="number" min="0" max="3" id="phq3" value="0"></label>
    <label>Feeling tired or little energy: <input type="number" min="0" max="3" id="phq4" value="0"></label>
    <label>Poor appetite or overeating: <input type="number" min="0" max="3" id="phq5" value="0"></label>
    <label>Feeling bad about yourself: <input type="number" min="0" max="3" id="phq6" value="0"></label>
    <label>Trouble concentrating: <input type="number" min="0" max="3" id="phq7" value="0"></label>
    <label>Moving/speaking slowly or too fidgety: <input type="number" min="0" max="3" id="phq8" value="0"></label>
    <label>Thoughts of being better off dead: <input type="number" min="0" max="3" id="phq9" value="0"></label>

    <button type="button" onclick="calculateRisk()">Calculate Risk</button>
  </form>

  <div class="output" id="result"></div>
  <div id="modifiers">
    <p><strong>Explore Ways to Lower Your Risk:</strong></p>
    <ul>
      <li>Maintain Vitamin D between 50–80 ng/mL: ~25% ↓ risk</li>
      <li>Regular physical activity: ~20% ↓ risk</li>
      <li>Anti-inflammatory diet (e.g., Mediterranean + EVOO): ~15% ↓ risk</li>
      <li>Omega-3 supplementation: ~10% ↓ risk</li>
      <li>Sulforaphane (broccoli sprouts): ~10% ↓ risk</li>
      <li>Ensure adequate iodine intake: ~10% ↓ risk</li>
      <li>Stop smoking (if applicable): ~10–20% ↓ risk</li>
    </ul>
  </div>

  <script>
    function calculateRisk() {
      const height = parseFloat(document.getElementById('height').value);
      const weight = parseFloat(document.getElementById('weight').value);
      const bmi = (weight / (height * height)) * 703;

      const a1c = parseFloat(document.getElementById('a1c').value);
      const bp = parseFloat(document.getElementById('bp').value);
      const vitd = parseFloat(document.getElementById('vitd').value);
      const menarche = parseInt(document.getElementById('menarche').value);
      const alcohol = parseInt(document.getElementById('alcohol').value);
      const exercise = document.getElementById('exercise').value === "yes";
      const dense = document.getElementById('dense').checked;
      const family = document.getElementById('family').checked;
      const nulliparous = document.getElementById('nulliparous').checked;
      const hrt = document.getElementById('hrt').checked;
      const smoking = document.getElementById('smoking').checked;
      const brca = document.getElementById('brca').checked;

      const phq = [
        'phq1','phq2','phq3','phq4','phq5','phq6','phq7','phq8','phq9'
      ].reduce((acc, id) => acc + parseInt(document.getElementById(id).value), 0);

      let score = 0;

      if (bmi >= 30) score += 2;
      else if (bmi >= 25) score += 1;

      if (a1c >= 6.5) score += 2;
      else if (a1c >= 5.7) score += 1;

      if (bp >= 140) score += 1;
      else if (bp >= 120) score += 0.5;

      if (vitd < 30) score += 1;

      if (phq >= 10) score += 1;

      if (dense) score += 2;
      if (family) score += 2;
      if (nulliparous) score += 1;
      if (hrt) score += 1.5;
      if (smoking) score += 1;
      if (brca) score += 3;

      if (menarche < 12) score += 0.5;

      if (alcohol >= 7) score += 1.5;
      else if (alcohol >= 3) score += 1;
      else if (alcohol > 0) score += 0.5;

      // MODIFIABLE PROTECTIONS
      if (vitd >= 50 && vitd <= 80) score -= 1.5;
      if (exercise) score -= 2;

      // Risk Mapping
      const relativeScore = Math.max(0, Math.min(score, 10));
      let lifetimeRisk = 10;
      if (relativeScore <= 2) lifetimeRisk = 8;
      else if (relativeScore <= 4) lifetimeRisk = 12;
      else if (relativeScore <= 6) lifetimeRisk = 20;
      else if (relativeScore <= 8) lifetimeRisk = 30;
      else lifetimeRisk = 40;

      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        <p>Relative Risk Score: <strong>${relativeScore.toFixed(1)} / 10</strong></p>
        <p>Estimated Lifetime Breast Cancer Risk: <strong>${lifetimeRisk}%</strong></p>
        <p>This means that out of 100 women like you, approximately ${lifetimeRisk} might develop breast cancer over their lifetime. This estimate can help guide your decision about screening (such as mammography).</p>
        <p>Curious how to reduce your risk? Click the button below to explore evidence-based strategies.</p>
      `;
      document.getElementById('modifiers').style.display = "block";
    }
  </script>
</body>
</html>
